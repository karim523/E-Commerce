import{a as O}from"./chunk-HCL3OOFS.js";import{h as L}from"./chunk-4XS7MJVQ.js";import{n as P}from"./chunk-GEN5SA5K.js";import{$b as v,Ab as f,Eb as _,Fb as m,Ob as c,Pb as C,Qb as I,Ra as g,Va as l,Vb as T,Wb as V,Xb as F,bc as b,ea as h,fb as k,ha as S,lb as y,nb as x,ra as d,rb as w,sa as p,tb as E,ub as D,vb as e,wb as n,xb as u}from"./chunk-2VPKGZOA.js";var $=(r,o)=>o.product.id,B=r=>["/orders",r],j=()=>["/home"];function N(r,o){r&1&&(e(0,"h2",2),c(1,"Your Cart is Empty"),n())}function G(r,o){if(r&1){let i=f();e(0,"div",6)(1,"div",8)(2,"div"),u(3,"img",9),n()(),e(4,"div",10)(5,"div")(6,"h3",11),c(7),n(),e(8,"p"),c(9," Price: "),e(10,"span",4),c(11),v(12,"currency"),n()(),e(13,"button",12),_("click",function(){let t=d(i).$implicit,s=m(2);return p(s.removeItem(t.product.id))}),u(14,"i",13),n()(),e(15,"div",14)(16,"span",15),_("click",function(){let t=d(i).$implicit,s=m(2);return p(s.updateCount(t.product.id,t.count+1))}),u(17,"i",16),n(),e(18,"span"),c(19),n(),e(20,"span",15),_("click",function(){let t=d(i).$implicit,s=m(2);return p(s.updateCount(t.product.id,t.count-1))}),u(21,"i",17),n()()()()}if(r&2){let i=o.$implicit;l(3),x("src",i.product.imageCover,g)("alt",i.product.title),l(4),C(i.product.title),l(4),C(b(12,5,i.price,"GBP")),l(8),C(i.count)}}function M(r,o){if(r&1){let i=f();e(0,"div",3)(1,"div")(2,"p"),c(3," Total Cart Price : "),e(4,"span",4),c(5),v(6,"currency"),n()()(),e(7,"div")(8,"button",5),c(9," Check Out "),n(),e(10,"p"),c(11," number of items :"),e(12,"span",4),c(13),n()()()(),E(14,G,22,8,"div",6,$),e(16,"button",7),_("click",function(){d(i);let t=m();return p(t.clearItems())}),c(17," Clear Your Cart"),n()}if(r&2){let i=m();l(5),I(" ",b(6,4,i.cartDetails().totalCartPrice,"GBP"),""),l(3),x("routerLink",F(7,B,i.cartDetails()._id)),l(5),C(i.cartDetails().products.length),l(),D(i.cartDetails().products),l(2),x("routerLink",V(9,j))}}var A=(()=>{let o=class o{constructor(){this._CartService=h(O),this.cartDetails=k({})}ngOnInit(){this._CartService.getProductToCart().subscribe({next:a=>{this.cartDetails.set(a.data)}})}removeItem(a){this._CartService.deleteSpecificCartItem(a).subscribe({next:t=>{this.cartDetails.set(t.data),this._CartService.cartNum.set(t.numOfCartItems)}})}updateCount(a,t){t>0&&this._CartService.updateProductQuantity(a,t).subscribe({next:s=>{this.cartDetails.set(s.data),this._CartService.cartNum.set(s.numOfCartItems)}})}clearItems(){this._CartService.clearCart().subscribe({next:a=>{a.message=="success"&&(this.cartDetails.set({}),this._CartService.cartNum.set(0))}})}ngOnDestroy(){this.cartSub?.unsubscribe()}};o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=S({type:o,selectors:[["app-cart"]],standalone:!0,features:[T],decls:5,vars:1,consts:[[1,"bg-main-light","rounded-4","shadow","p-4","my-2","container"],[1,"h2","mb-3"],[1,"h3"],[1,"d-flex","justify-content-between","align-items-center"],[1,"text-main"],[1,"btn","btn-primary","mb-3",3,"routerLink"],[1,"row","mb-2","border-bottom"],[1,"btn","btn-outline-danger","d-block","mx-auto","btn-lg",3,"click","routerLink"],[1,"col-md-2"],[1,"w-100",3,"src","alt"],[1,"col-md-10","d-flex","justify-content-between","align-items-center"],[1,"h5"],[1,"text-danger","btn","p-0",3,"click"],[1,"fa-solid","fa-trash"],[1,"d-flex","align-items-center","gap-2"],[1,"text-main","cursor-pointer",3,"click"],[1,"fa-solid","fa-circle-plus","fa-2x"],[1,"fa-solid","fa-circle-minus","fa-2x"]],template:function(t,s){t&1&&(e(0,"section",0)(1,"h1",1),c(2,"Shop Cart"),n(),y(3,N,2,0,"h2",2)(4,M,18,10),n()),t&2&&(l(3),w(3,s.cartDetails().products.length===0?3:4))},dependencies:[P,L]});let r=o;return r})();export{A as CartComponent};
