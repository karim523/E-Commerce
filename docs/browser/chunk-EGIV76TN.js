import{a as N}from"./chunk-HS4MTPCN.js";import"./chunk-G5KA7DMQ.js";import{a as P,b as _,c as q,d as A,h as D,i as k,j as R,k as G,m as V}from"./chunk-522WBATW.js";import{g as T,h as x}from"./chunk-4XS7MJVQ.js";import{h as b}from"./chunk-GEN5SA5K.js";import{Eb as w,Fb as v,Ob as s,Pb as y,Va as m,Vb as L,Yb as S,ea as h,ha as E,lb as g,nb as F,rb as d,vb as o,wb as i,xb as C}from"./chunk-2VPKGZOA.js";var B=(e,n)=>({"is-valid":e,"is-invalid":n});function M(e,n){e&1&&(o(0,"P",13),s(1,"Email is required"),i())}function j(e,n){e&1&&(o(0,"P",13),s(1,"Enter Valid Email "),i())}function I(e,n){if(e&1&&(o(0,"div",6),g(1,M,2,0,"P",13)(2,j,2,0),i()),e&2){let u,l=v();m(),d(1,(u=l.loginForm.get("email"))!=null&&u.getError("required")?1:(u=l.loginForm.get("email"))!=null&&u.getError("email")?2:-1)}}function O(e,n){e&1&&(o(0,"P",13),s(1,"password is required"),i())}function U(e,n){e&1&&(o(0,"P",13),s(1,"must be at least 6 chars "),i())}function $(e,n){if(e&1&&(o(0,"div",6),g(1,O,2,0,"P",13)(2,U,2,0),i()),e&2){let u,l=v();m(),d(1,(u=l.loginForm.get("password"))!=null&&u.getError("required")?1:(u=l.loginForm.get("password"))!=null&&u.getError("pattern")?2:-1)}}function z(e,n){e&1&&(o(0,"span"),C(1,"i",14),i())}function H(e,n){if(e&1&&(o(0,"p",6),s(1),i()),e&2){let u=v();m(),y(u.msgError)}}function J(e,n){e&1&&(o(0,"p",12),s(1,"Success"),i())}var ie=(()=>{let n=class n{constructor(){this._AuthService=h(N),this._FormBuilder=h(G),this._Router=h(T),this.msgError="",this.isLoading=!1,this.msgSucces=!1,this.loginForm=this._FormBuilder.group({email:[null,[_.required,_.email]],password:[null,[_.required,_.pattern(/^\w{6,}$/)]]})}loginSubmit(){this.isLoading=!0,this.loginForm.valid?this.loginSub=this._AuthService.setLoginForm(this.loginForm.value).subscribe({next:l=>{console.log(l),l.message=="success"&&(this.msgSucces=!0,setTimeout(()=>{localStorage.setItem("userToken",l.token),this._AuthService.saveUserData(),this._Router.navigate(["/home"])},800)),this.isLoading=!1},error:l=>{this.msgError=l.error.massage,console.log(l),this.isLoading=!1}}):(this.loginForm.setErrors({mismatch:!0}),this.loginForm.markAsTouched())}ngOnDestroy(){this.loginSub?.unsubscribe()}};n.\u0275fac=function(f){return new(f||n)},n.\u0275cmp=E({type:n,selectors:[["app-login"]],standalone:!0,features:[L],decls:22,vars:14,consts:[[1,"bg-main-light","shadow","p-2","my-2","rounded-4"],[1,"h2","text-main"],[3,"ngSubmit","formGroup"],[1,"my-2"],["for","email"],["formControlName","email","type","email","id","email",1,"form-control",3,"ngClass"],[1,"alert","alert-danger","w-100"],["for","password"],["formControlName","password","type","password","id","password",1,"form-control",3,"ngClass"],[1,"d-flex","justify-content-end","align-items-center","gap-4"],["routerLink","/forget"],["type","submit",1,"btn-main"],[1,"text-main"],[1,"m-0"],[1,"fas","fa-spin","fa-spinner"]],template:function(f,t){if(f&1&&(o(0,"section",0)(1,"h1",1),s(2,"Login Now:"),i(),o(3,"form",2),w("ngSubmit",function(){return t.loginSubmit()}),o(4,"div",3)(5,"label",4),s(6,"Email"),i(),C(7,"input",5),g(8,I,3,1,"div",6),i(),o(9,"div",3)(10,"label",7),s(11,"Password"),i(),C(12,"input",8),g(13,$,3,1,"div",6),i(),o(14,"div",9)(15,"a",10),s(16," Forget Password"),i(),o(17,"button",11),s(18," login "),g(19,z,2,0,"span"),i()(),g(20,H,2,1,"p",6)(21,J,2,0,"p",12),i()()),f&2){let r,p,a,c;m(3),F("formGroup",t.loginForm),m(4),F("ngClass",S(8,B,!((r=t.loginForm.get("email"))!=null&&r.errors)&&(((r=t.loginForm.get("email"))==null?null:r.touched)||((r=t.loginForm.get("email"))==null?null:r.dirty)),((r=t.loginForm.get("email"))==null?null:r.errors)&&(((r=t.loginForm.get("email"))==null?null:r.touched)||((r=t.loginForm.get("email"))==null?null:r.dirty)))),m(),d(8,(p=t.loginForm.get("email"))!=null&&p.errors&&((p=t.loginForm.get("email"))!=null&&p.touched||(p=t.loginForm.get("email"))!=null&&p.dirty)?8:-1),m(4),F("ngClass",S(11,B,!((a=t.loginForm.get("password"))!=null&&a.errors)&&(((a=t.loginForm.get("password"))==null?null:a.touched)||((a=t.loginForm.get("password"))==null?null:a.dirty)),((a=t.loginForm.get("password"))==null?null:a.errors)&&(((a=t.loginForm.get("password"))==null?null:a.touched)||((a=t.loginForm.get("password"))==null?null:a.dirty)))),m(),d(13,(c=t.loginForm.get("password"))!=null&&c.errors&&((c=t.loginForm.get("password"))!=null&&c.touched||(c=t.loginForm.get("password"))!=null&&c.dirty)?13:-1),m(6),d(19,t.isLoading?19:-1),m(),d(20,t.msgError?20:-1),m(),d(21,t.msgSucces?21:-1)}},dependencies:[V,D,P,q,A,k,R,b,x]});let e=n;return e})();export{ie as LoginComponent};
