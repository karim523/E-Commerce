import{a as U}from"./chunk-QL6XMWLP.js";import{a as J,c as z,g as G,l as R}from"./chunk-522WBATW.js";import{a as H}from"./chunk-TIJERXRX.js";import{l as q}from"./chunk-CCOJ22BF.js";import{a as $}from"./chunk-HCL3OOFS.js";import{h as D}from"./chunk-4XS7MJVQ.js";import{k as O,n as j}from"./chunk-GEN5SA5K.js";import{$b as w,Ab as A,Eb as x,Fb as m,Ob as l,Pb as _,Qb as E,Ra as L,Rb as M,Sb as N,Tb as V,Va as o,Vb as I,Wb as B,Xb as C,bc as y,ea as d,fb as T,ha as b,ka as P,lb as F,nb as f,ra as u,rb as k,sa as h,sb as W,tb as v,ub as S,vb as a,wb as c,xb as p}from"./chunk-2VPKGZOA.js";var K=(()=>{let i=class i{transform(t,r){return t.filter(s=>s.title.toLowerCase().includes(r.toLowerCase()))}};i.\u0275fac=function(r){return new(r||i)},i.\u0275pipe=P({name:"search",type:i,pure:!0,standalone:!0});let e=i;return e})();var X=(e,i)=>i.id,Y=e=>["/details",e],Z=()=>[1,2,3,4,5],tt=e=>({color:e});function et(e,i){e&1&&(a(0,"span"),p(1,"i",17),c())}function it(e,i){e&1&&p(0,"i",11)}function rt(e,i){if(e&1){let n=A();a(0,"div",4)(1,"div",5)(2,"div",6),p(3,"img",7),a(4,"h3",8),l(5),c(),a(6,"h4",9),l(7),c(),a(8,"div",10)(9,"span"),l(10),w(11,"currency"),c(),a(12,"div"),v(13,et,2,0,"span",null,W),F(15,it,1,0,"i",11),a(16,"span",12),l(17),c()()()(),a(18,"div",13)(19,"button",14),x("click",function(){let r=u(n).$implicit,s=m();return h(s.addCart(r.id))}),l(20," Add To Cart "),c(),a(21,"span",15),x("click",function(){let r=u(n).$implicit,s=m();return h(s.toggleWishList(r.id))})("click",function(){let r=u(n).$implicit,s=m();return h(s.addWishList(r.id))}),p(22,"i",16),c()()()()}if(e&2){let n=i.$implicit,t=m();o(2),f("routerLink",C(12,Y,n.id)),o(),f("src",n.imageCover,L)("alt",n.title),o(2),_(n.category.name),o(2),_(n.title.split(" ",2).join()),o(3),E("",y(11,9,n.price,"GBP")," "),o(3),S(B(14,Z).slice(0,n.ratingsAverage)),o(2),k(15,n.ratingsAverage%1!==0?15:-1),o(2),_(n.ratingsAverage),o(5),f("ngStyle",C(15,tt,t.isActive(n.id)?"red":"black"))}}var vt=(()=>{let i=class i{constructor(){this._ProductsService=d(U),this._WishListService=d(H),this._ToastrService=d(q),this._CartService=d($),this.wishlist=new Set,this.productsList=T([]),this.text="",this.wish=!1}ngOnInit(){this.productSub=this._ProductsService.getAllProducts().subscribe({next:t=>{this.productsList.set(t.data),this.loadWishlist()}})}addCart(t){this._CartService.addProductToCart(t).subscribe({next:r=>{this._ToastrService.success(r.message,"Fresh Cart"),this._CartService.cartNum.set(r.numOfCartItems)}})}addWishList(t){this._WishListService.addProductToWishList(t).subscribe({next:r=>{this._ToastrService.success(r.message,"Fresh Cart"),this.wish=!0}})}toggleWishList(t){this.wishlist.has(t)?this.wishlist.delete(t):this.wishlist.add(t),localStorage.setItem("wishlist",JSON.stringify(Array.from(this.wishlist)))}isActive(t){return this.wishlist.has(t)}loadWishlist(){let t=localStorage.getItem("wishlist");t&&(this.wishlist=new Set(JSON.parse(t)))}ngOnDestroy(){this.productSub?.unsubscribe()}};i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=b({type:i,selectors:[["app-product"]],standalone:!0,features:[I],decls:8,vars:4,consts:[[1,"pt-5"],["type","search","placeholder","Search by Name....",1,"form-control","w-75","mx-auto","mt-5",3,"ngModelChange","ngModel"],[1,"container","mt-5"],[1,"row","g-3"],[1,"col-md-6","col-lg-3"],[1,"product","border-0","p-2"],[3,"routerLink"],[1,"w-100",3,"src","alt"],[1,"small","text-main"],[1,"h6","mt-3"],[1,"d-flex","justify-content-between","align-items-center"],[1,"fa-solid","fa-star-half-stroke","rating-color"],[1,"text-muted"],[1,"d-flex","justify-content-between","align-items-center","mt-3"],[1,"btn-main","w-75","mx-auto",3,"click"],[1,"cursor-pointer",3,"click"],[1,"fa-solid","fa-heart","fa-2xl",3,"ngStyle"],[1,"fas","fa-star","rating-color"]],template:function(r,s){r&1&&(a(0,"section")(1,"div",0)(2,"input",1),V("ngModelChange",function(g){return N(s.text,g)||(s.text=g),g}),c()(),a(3,"div",2)(4,"div",3),v(5,rt,23,17,"div",4,X),w(7,"search"),c()()()),r&2&&(o(2),M("ngModel",s.text),o(3),S(y(7,1,s.productsList(),s.text)))},dependencies:[D,K,R,J,z,G,j,O]});let e=i;return e})();export{vt as a};
