import './polyfills.server.mjs';
import{a as T}from"./chunk-R2OWU64O.mjs";import"./chunk-QZLY374Y.mjs";import{a as q,b as u,c as N,d as G,e as x,f,h as R,i as A,j as M,m as D}from"./chunk-DUGZV646.mjs";import"./chunk-CBYSDMSX.mjs";import{k as V}from"./chunk-5UWVM5QH.mjs";import{j as F}from"./chunk-O3ZME34G.mjs";import{Db as w,Eb as m,Nb as a,Ua as s,Ub as b,Xb as y,aa as P,ea as S,kb as p,mb as d,oa as C,pa as g,qb as c,ub as r,vb as o,wb as _,zb as v}from"./chunk-KJ5B5VUN.mjs";import"./chunk-VVCT4QZE.mjs";var h=(n,l)=>({"is-valid":n,"is-invalid":l});function k(n,l){n&1&&(r(0,"P",7),a(1,"Email is required"),o())}function $(n,l){n&1&&(r(0,"P",7),a(1,"Enter Valid Email "),o())}function j(n,l){if(n&1&&(r(0,"div",5),p(1,k,2,0,"P",7)(2,$,2,0),o()),n&2){let e,i=m(2);s(),c(1,(e=i.verifiyEmail.get("email"))!=null&&e.getError("required")?1:(e=i.verifiyEmail.get("email"))!=null&&e.getError("email")?2:-1)}}function I(n,l){if(n&1){let e=v();r(0,"form",1),w("ngSubmit",function(){C(e);let t=m();return g(t.verifiysEmailSubmit())}),r(1,"div",2)(2,"label",3),a(3,"Email"),o(),_(4,"input",4),p(5,j,3,1,"div",5),o(),r(6,"button",6),a(7," Verify Email "),o()()}if(n&2){let e,i,t=m();d("formGroup",t.verifiyEmail),s(4),d("ngClass",y(4,h,!((e=t.verifiyEmail.get("email"))!=null&&e.errors)&&(((e=t.verifiyEmail.get("email"))==null?null:e.touched)||((e=t.verifiyEmail.get("email"))==null?null:e.dirty)),((e=t.verifiyEmail.get("email"))==null?null:e.errors)&&(((e=t.verifiyEmail.get("email"))==null?null:e.touched)||((e=t.verifiyEmail.get("email"))==null?null:e.dirty)))),s(),c(5,(i=t.verifiyEmail.get("email"))!=null&&i.errors&&((i=t.verifiyEmail.get("email"))!=null&&i.touched||(i=t.verifiyEmail.get("email"))!=null&&i.dirty)?5:-1),s(),d("disabled",t.verifiyEmail.invalid)}}function O(n,l){n&1&&(r(0,"P",7),a(1,"ResetCode is required"),o())}function z(n,l){n&1&&(r(0,"P",7),a(1,"Code Must be 6 chars"),o())}function B(n,l){if(n&1&&(r(0,"div",5),p(1,O,2,0,"P",7)(2,z,2,0),o()),n&2){let e,i=m(2);s(),c(1,(e=i.verifiyCode.get("resetCode"))!=null&&e.getError("required")?1:(e=i.verifiyCode.get("resetCode"))!=null&&e.getError("pattern")?2:-1)}}function H(n,l){if(n&1){let e=v();r(0,"form",1),w("ngSubmit",function(){C(e);let t=m();return g(t.verifiyCodeSubmit())}),r(1,"div",2)(2,"label",8),a(3,"Code"),o(),_(4,"input",9),p(5,B,3,1,"div",5),o(),r(6,"button",6),a(7," Verify Code "),o()()}if(n&2){let e,i,t=m();d("formGroup",t.verifiyCode),s(4),d("ngClass",y(4,h,!((e=t.verifiyCode.get("resetCode"))!=null&&e.errors)&&(((e=t.verifiyCode.get("resetCode"))==null?null:e.touched)||((e=t.verifiyCode.get("resetCode"))==null?null:e.dirty)),((e=t.verifiyCode.get("resetCode"))==null?null:e.errors)&&(((e=t.verifiyCode.get("resetCode"))==null?null:e.touched)||((e=t.verifiyCode.get("resetCode"))==null?null:e.dirty)))),s(),c(5,(i=t.verifiyCode.get("resetCode"))!=null&&i.errors&&((i=t.verifiyCode.get("resetCode"))!=null&&i.touched||(i=t.verifiyCode.get("resetCode"))!=null&&i.dirty)?5:-1),s(),d("disabled",t.verifiyCode.invalid)}}function J(n,l){n&1&&(r(0,"P",7),a(1,"password is required"),o())}function K(n,l){n&1&&(r(0,"P",7),a(1,"must be at least 6 chars "),o())}function L(n,l){if(n&1&&(r(0,"div",5),p(1,J,2,0,"P",7)(2,K,2,0),o()),n&2){let e,i=m(2);s(),c(1,(e=i.resetPassword.get("password"))!=null&&e.getError("required")?1:(e=i.resetPassword.get("password"))!=null&&e.getError("pattern")?2:-1)}}function Q(n,l){if(n&1){let e=v();r(0,"form",1),w("ngSubmit",function(){C(e);let t=m();return g(t.verifiyPasswordSubmit())}),r(1,"div",2)(2,"label",3),a(3,"Email"),o(),_(4,"input",10),o(),r(5,"div",2)(6,"label",11),a(7,"Password"),o(),_(8,"input",12),p(9,L,3,1,"div",5),o(),r(10,"button",6),a(11,"Reset"),o()()}if(n&2){let e,i,t=m();d("formGroup",t.resetPassword),s(8),d("ngClass",y(4,h,!((e=t.resetPassword.get("password"))!=null&&e.errors)&&(((e=t.resetPassword.get("password"))==null?null:e.touched)||((e=t.resetPassword.get("password"))==null?null:e.dirty)),((e=t.resetPassword.get("password"))==null?null:e.errors)&&(((e=t.resetPassword.get("password"))==null?null:e.touched)||((e=t.resetPassword.get("password"))==null?null:e.dirty)))),s(),c(9,(i=t.resetPassword.get("password"))!=null&&i.errors&&((i=t.resetPassword.get("password"))!=null&&i.touched||(i=t.resetPassword.get("password"))!=null&&i.dirty)?9:-1),s(),d("disabled",t.resetPassword.invalid)}}var ne=(()=>{let l=class l{constructor(){this.step=1,this._AuthService=P(T),this._Router=P(V),this.verifiyEmail=new x({email:new f(null,[u.required,u.email])}),this.verifiyCode=new x({resetCode:new f(null,[u.required,u.pattern(/^\w{6}$/)])}),this.resetPassword=new x({email:new f(null,[u.required,u.email]),newPassword:new f(null,[u.required,u.pattern(/^\w{6,}$/)])})}verifiysEmailSubmit(){let i=this.verifiyEmail.get("email")?.value;this.resetPassword.get("email")?.patchValue(i),this._AuthService.setVerifiyEmail(this.verifiyEmail.value).subscribe({next:t=>{t.statusMsg==="success"&&(this.step=2)},error:t=>{console.log(t)}})}verifiyCodeSubmit(){this._AuthService.setVerifiyCode(this.verifiyCode.value).subscribe({next:i=>{i.statusMsg==="success"&&(this.step=3)},error:i=>{console.log(i)}})}verifiyPasswordSubmit(){this._AuthService.setResetPassword(this.resetPassword.value).subscribe({next:i=>{localStorage.setItem("userToken",i.toekn),this._Router.navigate(["/home"])},error:i=>{console.log(i)}})}ngOnDestroy(){this.ForgetPasswordSub?.unsubscribe()}};l.\u0275fac=function(t){return new(t||l)},l.\u0275cmp=S({type:l,selectors:[["app-forget-password"]],standalone:!0,features:[b],decls:6,vars:1,consts:[[1,"bg-main-light","rounded-4","shadow","p-3","my-3",3,"formGroup"],[1,"bg-main-light","rounded-4","shadow","p-3","my-3",3,"ngSubmit","formGroup"],[1,"my-2"],["for","email"],["type","email","formControlName","email",1,"form-control",3,"ngClass"],[1,"alert","alert-danger","w-100"],[1,"btn-main",3,"disabled"],[1,"m-0"],["for","code"],["type","resetCode","formControlName","resetCode",1,"form-control",3,"ngClass"],["readonly","","type","email","formControlName","email",1,"form-control"],["for","password"],["type","password","formControlName","newPassword",1,"form-control",3,"ngClass"]],template:function(t,E){t&1&&(r(0,"section")(1,"h2"),a(2,"Forget Password"),o(),p(3,I,8,7,"form",0)(4,H,8,7)(5,Q,12,7),o()),t&2&&(s(3),c(3,E.step===1?3:E.step===2?4:E.step===3?5:-1))},dependencies:[D,R,q,N,G,A,M,F]});let n=l;return n})();export{ne as ForgetPasswordComponent};
