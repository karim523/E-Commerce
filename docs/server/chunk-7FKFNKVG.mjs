import './polyfills.server.mjs';
import{a as B}from"./chunk-R2OWU64O.mjs";import"./chunk-QZLY374Y.mjs";import{a as G,b as f,c as V,d as z,h as M,i as Z,j as k,k as $,m as j}from"./chunk-DUGZV646.mjs";import"./chunk-CBYSDMSX.mjs";import{k as D}from"./chunk-5UWVM5QH.mjs";import{j as L}from"./chunk-O3ZME34G.mjs";import{Db as q,Eb as w,Nb as a,Ob as x,Ua as s,Ub as A,Xb as y,aa as T,ea as N,kb as c,mb as h,qb as u,ub as n,vb as r,wb as F}from"./chunk-KJ5B5VUN.mjs";import"./chunk-VVCT4QZE.mjs";var P=(t,i)=>({"is-valid":t,"is-invalid":i});function I(t,i){t&1&&(n(0,"P",17),a(1,"Name is required"),r())}function O(t,i){t&1&&(n(0,"P",17),a(1,"Name Should be more than or equal 3 chars"),r())}function H(t,i){t&1&&(n(0,"P",17),a(1,"Name Should be less than or equal 20 chars"),r())}function J(t,i){if(t&1&&(n(0,"div",6),c(1,I,2,0,"P",17)(2,O,2,0)(3,H,2,0),r()),t&2){let l,o=w();s(),u(1,(l=o.registerForm.get("name"))!=null&&l.getError("required")?1:(l=o.registerForm.get("name"))!=null&&l.getError("minlength")?2:(l=o.registerForm.get("name"))!=null&&l.getError("maxlength")?3:-1)}}function K(t,i){t&1&&(n(0,"P",17),a(1,"Email is required"),r())}function Q(t,i){t&1&&(n(0,"P",17),a(1,"Enter Valid Email "),r())}function U(t,i){if(t&1&&(n(0,"div",6),c(1,K,2,0,"P",17)(2,Q,2,0),r()),t&2){let l,o=w();s(),u(1,(l=o.registerForm.get("email"))!=null&&l.getError("required")?1:(l=o.registerForm.get("email"))!=null&&l.getError("email")?2:-1)}}function W(t,i){t&1&&(n(0,"P",17),a(1,"Phone is required"),r())}function X(t,i){t&1&&(n(0,"P",17),a(1,"accept only egypt phone numbers "),r())}function Y(t,i){if(t&1&&(n(0,"div",6),c(1,W,2,0,"P",17)(2,X,2,0),r()),t&2){let l,o=w();s(),u(1,(l=o.registerForm.get("phone"))!=null&&l.getError("required")?1:(l=o.registerForm.get("phone"))!=null&&l.getError("pattern")?2:-1)}}function ee(t,i){t&1&&(n(0,"P",17),a(1,"password is required"),r())}function te(t,i){t&1&&(n(0,"ul"),a(1," must be "),n(2,"li"),a(3,"Start with a letter (either uppercase or lowercase)."),r(),n(4,"li"),a(5,"Be between 6 and 9 characters in total."),r(),n(6,"li"),a(7,"Can only contain letters (A-Z or a-z) and numbers (0-9)"),r()())}function re(t,i){if(t&1&&(n(0,"div",6),c(1,ee,2,0,"P",17)(2,te,8,0),r()),t&2){let l,o=w();s(),u(1,(l=o.registerForm.get("password"))!=null&&l.getError("required")?1:(l=o.registerForm.get("password"))!=null&&l.getError("pattern")?2:-1)}}function ne(t,i){t&1&&(n(0,"p",6),a(1,"Password confirmation is incorrect"),r())}function ie(t,i){t&1&&(n(0,"span"),F(1,"i",18),r())}function le(t,i){if(t&1&&(n(0,"p",6),a(1),r()),t&2){let l=w();s(),x(l.msgError)}}function oe(t,i){t&1&&(n(0,"p",16),a(1,"Success"),r())}var ce=(()=>{let i=class i{constructor(){this._AuthService=T(B),this._FormBuilder=T($),this._Router=T(D),this.msgError="",this.isLoading=!1,this.msgSucces=!1,this.registerForm=this._FormBuilder.group({name:[null,[f.required,f.minLength(3),f.maxLength(20)]],email:[null,[f.required,f.email]],password:[null,[f.required,f.pattern(/^(?=.*[A-Z])(?=.*\d)(?=.*[a-z])[A-Za-z\d]{6,9}$/)]],rePassword:[null,[]],phone:[null,[f.required,f.pattern(/^01[0125[0-9]{9}$/)]]},{validators:[this.confirmPassword]})}registerSubmit(){this.isLoading=!0,this.registerForm.valid?this.registerSub=this._AuthService.setRegisterForm(this.registerForm.value).subscribe({next:o=>{console.log(o),o.message=="success"&&setTimeout(()=>{this.msgSucces=!0,this._Router.navigate(["/login"])},600),this.isLoading=!1},error:o=>{this.msgError=o.error.massage,console.log(o),this.isLoading=!1}}):(this.registerForm.setErrors({mismatch:!0}),this.registerForm.markAsTouched())}confirmPassword(o){return o.get("password")?.value===o.get("rePassword")?.value?null:{mismatch:!0}}ngOnDestroy(){this.registerSub?.unsubscribe()}};i.\u0275fac=function(b){return new(b||i)},i.\u0275cmp=N({type:i,selectors:[["app-register"]],standalone:!0,features:[A],decls:34,vars:29,consts:[[1,"bg-main-light","shadow","p-2","my-5","rounded-4"],[1,"h2","text-main"],[3,"ngSubmit","formGroup"],[1,"my-2"],["for","name"],["formControlName","name","type","text","id","name",1,"form-control",3,"ngClass"],[1,"alert","alert-danger","w-100"],["for","email"],["formControlName","email","type","email","id","email",1,"form-control",3,"ngClass"],["for","phone"],["formControlName","phone","type","text","id","phone",1,"form-control",3,"ngClass"],["for","password"],["formControlName","password","type","password","id","password",1,"form-control",3,"ngClass"],["for","rePassword"],["formControlName","rePassword","type","password","id","rePassword",1,"form-control",3,"ngClass"],["type","submit",1,"btn-main","ms-auto","d-block"],[1,"text-main"],[1,"m-0"],[1,"fas","fa-spin","fa-spinner"]],template:function(b,e){if(b&1&&(n(0,"section",0)(1,"h1",1),a(2,"Register Now:"),r(),n(3,"form",2),q("ngSubmit",function(){return e.registerSubmit()}),n(4,"div",3)(5,"label",4),a(6,"Name"),r(),F(7,"input",5),c(8,J,4,1,"div",6),r(),n(9,"div",3)(10,"label",7),a(11,"Email"),r(),F(12,"input",8),c(13,U,3,1,"div",6),r(),n(14,"div",3)(15,"label",9),a(16,"Phone"),r(),F(17,"input",10),c(18,Y,3,1,"div",6),r(),n(19,"div",3)(20,"label",11),a(21,"Password"),r(),F(22,"input",12),c(23,re,3,1,"div",6),r(),n(24,"div",3)(25,"label",13),a(26,"RePassword"),r(),F(27,"input",14),c(28,ne,2,0,"p",6),r(),n(29,"button",15),a(30," Register "),c(31,ie,2,0,"span"),r(),c(32,le,2,1,"p",6)(33,oe,2,0,"p",16),r()()),b&2){let m,C,d,E,g,v,p,S,_,R;s(3),h("formGroup",e.registerForm),s(4),h("ngClass",y(14,P,!((m=e.registerForm.get("name"))!=null&&m.errors)&&(((m=e.registerForm.get("name"))==null?null:m.touched)||((m=e.registerForm.get("name"))==null?null:m.dirty)),((m=e.registerForm.get("name"))==null?null:m.errors)&&(((m=e.registerForm.get("name"))==null?null:m.touched)||((m=e.registerForm.get("name"))==null?null:m.dirty)))),s(),u(8,(C=e.registerForm.get("name"))!=null&&C.errors&&((C=e.registerForm.get("name"))!=null&&C.touched||(C=e.registerForm.get("name"))!=null&&C.dirty)?8:-1),s(4),h("ngClass",y(17,P,!((d=e.registerForm.get("email"))!=null&&d.errors)&&(((d=e.registerForm.get("email"))==null?null:d.touched)||((d=e.registerForm.get("email"))==null?null:d.dirty)),((d=e.registerForm.get("email"))==null?null:d.errors)&&(((d=e.registerForm.get("email"))==null?null:d.touched)||((d=e.registerForm.get("email"))==null?null:d.dirty)))),s(),u(13,(E=e.registerForm.get("email"))!=null&&E.errors&&((E=e.registerForm.get("email"))!=null&&E.touched||(E=e.registerForm.get("email"))!=null&&E.dirty)?13:-1),s(4),h("ngClass",y(20,P,!((g=e.registerForm.get("phone"))!=null&&g.errors)&&(((g=e.registerForm.get("phone"))==null?null:g.touched)||((g=e.registerForm.get("phone"))==null?null:g.dirty)),((g=e.registerForm.get("phone"))==null?null:g.errors)&&(((g=e.registerForm.get("phone"))==null?null:g.touched)||((g=e.registerForm.get("phone"))==null?null:g.dirty)))),s(),u(18,(v=e.registerForm.get("phone"))!=null&&v.errors&&((v=e.registerForm.get("phone"))!=null&&v.touched||(v=e.registerForm.get("phone"))!=null&&v.dirty)?18:-1),s(4),h("ngClass",y(23,P,!((p=e.registerForm.get("password"))!=null&&p.errors)&&(((p=e.registerForm.get("password"))==null?null:p.touched)||((p=e.registerForm.get("password"))==null?null:p.dirty)),((p=e.registerForm.get("password"))==null?null:p.errors)&&(((p=e.registerForm.get("password"))==null?null:p.touched)||((p=e.registerForm.get("password"))==null?null:p.dirty)))),s(),u(23,(S=e.registerForm.get("password"))!=null&&S.errors&&((S=e.registerForm.get("password"))!=null&&S.touched||(S=e.registerForm.get("password"))!=null&&S.dirty)?23:-1),s(4),h("ngClass",y(26,P,!((_=e.registerForm.get("rePassword"))!=null&&_.errors)&&(((_=e.registerForm.get("rePassword"))==null?null:_.touched)||((_=e.registerForm.get("rePassword"))==null?null:_.dirty)),((_=e.registerForm.get("rePassword"))==null?null:_.errors)&&(((_=e.registerForm.get("rePassword"))==null?null:_.touched)||((_=e.registerForm.get("rePassword"))==null?null:_.dirty)))),s(),u(28,e.registerForm.getError("mismatch")&&((R=e.registerForm.get("rePassword"))!=null&&R.touched||(R=e.registerForm.get("rePassword"))!=null&&R.dirty)?28:-1),s(3),u(31,e.isLoading?31:-1),s(),u(32,e.msgError?32:-1),s(),u(33,e.msgSucces?33:-1)}},dependencies:[j,M,G,V,z,Z,k,L]});let t=i;return t})();export{ce as RegisterComponent};
